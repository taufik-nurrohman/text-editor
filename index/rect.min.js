/*!
 *
 * The MIT License (MIT)
 *
 * Copyright © 2020 Taufik Nurrohman
 *
 * <https://github.com/taufik-nurrohman/text-editor>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
!function(){"use strict";var t,n,r,e=function(t){return Array.isArray(t)},i=function(t){return"number"==typeof t},o=function(t,n){return void 0===n&&(n=!0),"object"==typeof t&&(!n||function(t,n){return t&&u(n)&&t instanceof n}(t,Object))},u=function(t){return function(t){return void 0!==t}(t)&&!function(t){return null===t}(t)},f=function(t){return"string"==typeof t},a=function t(n){if(e(n))return n.map((function(r){return t(n)}));if(o(n)){for(var r in n)n[r]=t(n[r]);return n}return!1===n?"false":null===n?"null":!0===n?"true":""+n},c=function(t){return t.replace(/[-_.](\w)/g,(function(t,n){return d(n)}))},d=function(t){return t.toUpperCase()},l=function t(n){if(e(n))return n.map((function(n){return t(n)}));if(function(t){return/^-?(?:\d*.)?\d+$/.test(t+"")}(n))return function(t,n){return void 0===n&&(n=10),parseInt(t,n)}(n);if(o(n)){for(var r in n)n[r]=t(n[r]);return n}return{false:!1,null:null,true:!0}[n]||n},s=document,p=window,h=s.body,v=function(t,n,r){void 0===r&&(r=!0);var e=p.getComputedStyle(t).getPropertyValue(n);return r&&(e=l(e)),e||""===e||0===e?e:null},g=function(t,n){return t.removeAttribute(n),t},w=function(t,n){return t.style[c(n)]=null,t},y=function(t,n,r){return!0===r&&(r=n),t.setAttribute(n,a(r)),t},b=function(t,n,r){if(void 0===r&&(r=!0),null===n)return t;var e="innerHTML";return function(t,n){return n in t}(t,e)&&(t[e]=r?n.trim():n),t},m=function(t,n,r){return i(r)&&(r+="px"),t.style[c(n)]=a(r),t},x=function(t){return t.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;")},z=function(t){return[t.offsetLeft,t.offsetTop]},E=function(t){return function(t){return t===p}(t)?[t.innerWidth,t.innerHeight]:[t.offsetWidth,t.offsetHeight]},T=function(t,n){return void 0===n&&(n=10),n?parseInt(t,n):parseFloat(t)};function j(t,n){return void 0===n&&(n="span"),"<"+n+">"+t+"</"+n+">"}function A(t,n,r){var e=j("&zwnj;"),o=["border-bottom-width","border-left-width","border-right-width","border-top-width","box-sizing","direction","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","height","letter-spacing","line-height","max-height","max-width","min-height","min-width","padding-bottom","padding-left","padding-right","padding-top","tab-size","text-align","text-decoration","text-indent","text-transform","width","word-spacing"];b(n,j(x(t.before))+e+j(x(t.value),"mark")+e+j(x(t.after)));var u="";o.forEach((function(t){var n=v(r,t);n&&(u+=t+":"+n+";")}));var f,a=T(v(r,o[1]),0),c=T(v(r,o[3]),0),d=z(r),l=d[0],s=d[1],p=E(r),g=p[0],A=p[1];y(n,"style",u),function(t,n){var r;for(var e in n)(r=n[e])||""===r||0===r?m(t,e,r):w(t,e)}(n,{"border-style":"solid","white-space":"pre-wrap","word-wrap":"break-word",overflow:"auto",position:"absolute",left:l,top:s,visibility:"hidden"}),f=n,h.append(f);var H=function(t,n){var r=t.children;return i(n)?r[n]||null:r||[]}(n),k=H[1],C=H[2],I=H[3],L=z(k),W=E(k),$=z(C),F=E(C),M=z(I),O=E(I);return[{h:W[1],w:0,x:L[0]+l+a,y:L[1]+s+c},{h:O[1],w:0,x:M[0]+l+a,y:M[1]+s+c},{h:F[1],w:$[0],x:$[0]+l+a,y:$[1]+s+c},{h:A,w:g,x:l,y:s}]}if(u(TE)){var H=(t=f(t="div")?s.createElement(t):t,o(n)&&(r=n,n=!1),f(n)&&b(t,n),o(r)&&function(t,n){var r;for(var e in n)(r=n[e])||""===r||0===r?y(t,e,r):g(t,e)}(t,r),t);TE.mirror=H,TE.prototype.rect=function(t){var n=A(this.$(),H,this.self);return u(t)?[n[0][t],n[1][t]]:n}}}();