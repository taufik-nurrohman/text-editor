!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";var t=function(t){return function(t){return void 0!==t}(t)&&!function(t){return null===t}(t)},r=function(t){return t.length},e=function(r,e){return t(e[0])&&r<e[0]?e[0]:t(e[1])&&r>e[1]?e[1]:r};const i=TE.prototype;i._history=[],i._historyState=-1,i.history=function(r){let e=this;return t(r)?t(e._history[r])?e._history[r]:null:e._history},i.loss=function(r){let i,o=this;return!0===r?(o._history=[],o._historyState=-1,[]):(i=o._history.splice(t(r)?r:o._historyState,1),o._historyState=e(o._historyState-1,[-1]),i)},i.record=function(r){let e=this,{end:i,start:o}=e.$(),n=e._history[e._historyState]||[],s=[e.self.value,o,i];return s[0]===n[0]&&s[1]===n[1]&&s[2]===n[2]||(++e._historyState,e._history[t(r)?r:e._historyState]=s),e},i.redo=function(){let t,i=this;return i._historyState=e(i._historyState+1,[0,r(i._history)-1]),t=i._history[i._historyState],i.set(t[0]).select(t[1],t[2])},i.undo=function(){let t,i=this;return i._historyState=e(i._historyState-1,[0,r(i._history)-1]),t=i._history[i._historyState],i.set(t[0]).select(t[1],t[2])}}));