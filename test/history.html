<!DOCTYPE html>
<html dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>History &middot; Text Editor</title>
    <link href="test.css" rel="stylesheet">
    <script src="../text-editor.js"></script>
    <script src="../text-editor.history.js"></script>
  </head>
  <body>
    <h1>History Test</h1>
    <p><textarea id="area" placeholder="Type something&hellip;"></textarea></p>
    <p>
      <button onclick="return dump.innerHTML = 'Current: ' + editor._historyState + '\n---\nAll: ' + JSON.stringify(editor.history(), null, 2), false;">inspect history</button>
      <button onclick="return dump.innerHTML = JSON.stringify(editor.history(1), null, 2), false;">inspect the 2(nd) history</button>
      <button onclick="return editor.record(), false;">save selection to history</button>
      <button onclick="return editor.loss(), false;">delete current history</button>
      <button onclick="return editor.loss(editor._historyState), false;">delete last history</button>
      <button onclick="return editor.loss(0), false;">delete first history</button>
      <button onclick="return editor.loss(true), false;">delete all history</button>
      <br>
      <button onclick="return editor.record().wrap('**', '**').record(), false;"><b>B</b></button>
      <button onclick="return editor.record().wrap('_', '_').record(), false;"><i>I</i></button>
      <button onclick="return editor.undo(), false;">undo</button>
      <button onclick="return editor.redo(), false;">redo</button>
    </p>
    <pre id="dump"></pre>
    <script>
    var editor = new TE(document.getElementById('area')),
        dump = document.getElementById('dump');
    editor.record(); // Record the initial value
    editor.target.addEventListener("keydown", function() {
        setTimeout(function() {
            editor.record(); // Record keyboard interaction
        }, 1);
    }, false);
    </script>
  </body>
</html>