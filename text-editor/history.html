<!DOCTYPE html>
<html dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>History &middot; Text Editor</title>
  </head>
  <body>
    <p><textarea placeholder="Type something&hellip;" spellcheck="false"></textarea></p>
    <p>
      <button onclick="dump.innerHTML = 'Current: ' + editor._historyState + '\n---\nAll: ' + JSON.stringify(editor.history(), null, 2);">Inspect History</button>
      <button onclick="dump.innerHTML = JSON.stringify(editor.history(1), null, 2);">Inspect the 2(nd) History</button>
      <button onclick="editor.record();">Save Selection to History</button>
      <button onclick="editor.loss();">Delete Current History</button>
      <button onclick="editor.loss(editor._historyState);">Delete the Last History</button>
      <button onclick="editor.loss(0);">Delete the First History</button>
      <button onclick="editor.loss(true);">Delete All History</button>
    </p>
    <p>
      <button onclick="editor.record().wrap('**', '**').record();"><b>B</b></button>
      <button onclick="editor.record().wrap('_', '_').record();"><i>I</i></button>
      <button onclick="editor.undo();">Undo</button>
      <button onclick="editor.redo();">Redo</button>
    </p>
    <pre><code></code></pre>
    <h2>Methods and Properties</h2>
    <h3><code>editor.history()</code></h3>
    <p>Get history data.</p>
    <h3><code>editor.record()</code></h3>
    <p>Store current value and selection to history.</p>
    <h3><code>editor.loss()</code></h3>
    <p>Remove previous history data.</p>
    <h3><code>editor.undo()</code></h3>
    <p>Undo previous action.</p>
    <h3><code>editor.redo()</code></h3>
    <p>Redo previous action.</p>
    <script src="../text-editor.min.js"></script>
    <script src="history.min.js"></script>
    <script>

    var editor = new TE(document.querySelector('textarea')),
        dump = document.querySelector('code');

    editor.record(); // Record the initial value
    editor.self.addEventListener('keydown', function() {
        setTimeout(function() {
            editor.record(); // Record keyboard interaction
        }, 1);
    }, false);

    </script>
  </body>
</html>