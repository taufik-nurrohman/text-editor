/*!
 * ==========================================================
 *  TEXT EDITOR SOURCE 1.1.0
 * ==========================================================
 * Author: Taufik Nurrohman <https://github.com/tovic>
 * License: MIT
 * ----------------------------------------------------------
 */
!function(e,t,n){function o(e,t,n){e&&n&&e.removeEventListener(t,n)}function r(e,t,n){e&&n&&e.addEventListener(t,n,!1)}function c(e,t){return Object.assign(e,t)}function a(e){e&&e.preventDefault()}var s,i,u=e[n],f=setTimeout,l=u.esc,d="blur",p="ctrlKey",v="focus",h="fromCharCode",b="indexOf",w="lastIndexOf",y="keydown",g="match",m="mousedown",E="pull",k="push",x="record",C="redo",$="replace",L="select",O="shiftKey",_="toLowerCase",K="touch",R=K+"start",T="undo";s=function(e,t){function s(){f(function(){var e=j.$(),t=/\W/g,n=".",o=e.before[$](t,n)[w](n),r=e.after[$](t,n)[b](n);o=0>o?0:o+1,r=0>r?e.after.length:r,j[L](o,e.end+r)},0)}function i(e){var n=W.close,o=t.tab,r=e.keyCode,c=(e.key||String[h](r))[_](),s=e[p],i="enter"===c||13===r,u=e[O],b="tab"===c||9===r,w=j.$(),y=w.before,m=w.value,x=w.after,$=y.slice(-1),R=x.slice(0,1),D=y[g](RegExp("(?:^|\\n)("+l(o)+"+).*$")),I=D?D[1]:"",S=n[c];s?z&&("z"===c||90===r?(j[T](),a(e)):("y"===c||89===r)&&(j[C](),a(e))):b?(j[u?E:k](o),K(),a(e)):"\\"!==$&&c===R?(j[L](w.end+1),K(),a(e)):"\\"!==$&&S?(K(),j.wrap(c,S),K(),a(e)):"backspace"===c||8===r?(m&&y[g](RegExp(l(o)+"$"))?(j[E](o),a(e)):(S=n[$],S&&S===R&&(j.peel($,R),a(e))),K()):"delete"===c||46===r?(S=n[$],S&&S===R&&(j.peel($,R),a(e)),K()):i?(S=n[$],S&&S===R?(j.wrap("\n"+o+I,"\n"+I)[d]()[v](),a(e)):(m||I)&&(j.insert("\n",-1,!0)[k](I)[d]()[v](),a(e)),K()):f(K,0)}function K(){z&&j[x]()}var j=this,z=T in u._;u.call(this,e,t);var D="source",t=j.state,I={close:{"(":")","{":"}","[":"]",'"':'"',"'":"'","<":">"},select:!0},S=!(D in t)||t[D];S&&(t[D]=c(I,!0===t[D]?{}:t[D]));var W=t[D]||{};S&&(W[L]&&(r(e,m,s),r(e,R,s)),r(e,y,i),K()),j.pop=function(){return o(e,m,s),o(e,R,s),o(e,y,i),delete e[n],z&&j[loss](!0),j},j.state=t};for(i in u)s[i]=u[i];s.prototype=s._=u._,e[n]=s}(window,document,"TE");