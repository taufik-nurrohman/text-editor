/*!
 * ==========================================================
 *  TEXT EDITOR SOURCE 1.1.0
 * ==========================================================
 * Author: Taufik Nurrohman <https://github.com/tovic>
 * License: MIT
 * ----------------------------------------------------------
 */
!function(e,t,n){function o(e,t,n){e&&n&&e.removeEventListener(t,n)}function r(e,t,n){e&&n&&e.addEventListener(t,n,!1)}function c(e,t){return Object.assign(e,t)}function a(e){e&&e.preventDefault()}var s,i,u=e[n],f=setTimeout,l=u.esc,d="blur",p="ctrlKey",v="focus",h="fromCharCode",b="indexOf",w="lastIndexOf",y="keydown",g="match",m="mousedown",E="pull",k="push",x="record",C="redo",$="replace",L="select",O="shiftKey",K="toLowerCase",R="touch",T=R+"start",j="undo";s=function(e,t){function s(){f(function(){var e=z.$(),t=/\W/g,n=".",o=e.before[$](t,n)[w](n),r=e.after[$](t,n)[b](n);o=0>o?0:o+1,r=0>r?e.after.length:r,z[L](o,e.end+r)},0)}function i(e){var n=_.close,o=t.tab,r=e.keyCode,c=(e.key||String[h](r))[K](),s=e[p],i="enter"===c||13===r,u=e[O],b="tab"===c||9===r,w=z.$(),y=w.before,m=w.value,x=w.after,$=y.slice(-1),T=x.slice(0,1),I=y[g](RegExp("(?:^|\\n)("+l(o)+"+).*$")),S=I?I[1]:"",W=n[c];s?D&&("z"===c||90===r?(z[j](),a(e)):("y"===c||89===r)&&(z[C](),a(e))):b?(z[u?E:k](o),R(),a(e)):"\\"!==$&&c===T?(z[L](w.end+1),R(),a(e)):"\\"!==$&&W?(R(),z.wrap(c,W),R(),a(e)):"backspace"===c||8===r?(""===m&&y[g](RegExp(l(o)+"$"))?(z[E](o),a(e)):(W=n[$],W&&W===T&&(z.peel($,T),a(e))),R()):"delete"===c||46===r?(W=n[$],W&&W===T&&(z.peel($,T),a(e)),R()):i?(W=n[$],W&&W===T?(z.wrap("\n"+o+S,"\n"+S)[d]()[v](),a(e)):""!==m&&(z.insert("\n",-1,!0)[k](S)[d]()[v](),a(e)),R()):f(R,0)}function R(){D&&z[x]()}var z=this,D=j in u._;u.call(this,e,t);var I="source",t=z.state,S={close:{"(":")","{":"}","[":"]",'"':'"',"'":"'","<":">"},select:!0},W=!(I in t)||t[I];W&&(t[I]=c(S,!0===t[I]?{}:t[I]));var _=t[I]||{};W&&(_[L]&&(r(e,m,s),r(e,T,s)),r(e,y,i),R()),z.pop=function(){return o(e,m,s),o(e,T,s),o(e,y,i),delete e[n],D&&z[loss](!0),z},z.state=t};for(i in u)s[i]=u[i];s.prototype=s._=u._,e[n]=s}(window,document,"TE");