/*!
 * ==============================================================
 *  TEXT EDITOR SOURCE 1.1.7
 * ==============================================================
 * Author: Taufik Nurrohman <https://github.com/taufik-nurrohman>
 * License: MIT
 * --------------------------------------------------------------
 */
!function(e,t,n){var r,o,s=e.TE,u=e.setTimeout,c=s.esc,i="blur",a="call",f="close",l="ctrlKey",d="disabled",p="focus",v="fromCharCode",y="indexOf",h="lastIndexOf",m="length",k="match",w="pull",b="push",C="readOnly",$="record",g="redo",E="replace",K="select",O="shiftKey",x="toLowerCase",L="undo";function T(e,t,n){e.removeEventListener(t,n)}function _(e,t,n){e.addEventListener(t,n,!1)}function j(e){e&&e.preventDefault()}function z(e,t){return new RegExp(e,t)}for(o in r=function(e,t){var n=this,r=n.pop,o=L in s._;s[a](n,e,t);var D,I,R={},S=!("source"in(t=n.state))||t.source;R[f]={"`":"`","(":")","{":"}","[":"]",'"':'"',"'":"'","<":">"},R[w]=function(e){var t=e.ctrlKey,n=e.key,r=e.keyCode;return t&&(n&&"["===n||r&&219===r)},R[b]=function(e){var t=e.ctrlKey,n=e.key,r=e.keyCode;return t&&(n&&"]"===n||r&&221===r)},R[K]=!0,S&&(t.source=(D=R,I=!0===t.source?{}:t.source,Object.assign(D,I)));var W,q=t.source||{};function A(){e[d]||e[C]||u(function(){var e=n.$(),t=/\W/g,r=e.before[E](t,"|")[h]("|"),o=e.after[E](t,"|")[y]("|");e.value;r=r<0?0:r+1,o=o<0?e.after[m]:o,W!==e.start&&n[K](r,e.end+o)},0)}function B(){W=n.$().start}function F(r){if(!e[d]&&!e[C]){var o=q[f],s=t.tab,y=r.keyCode,h=(r.key||String[v](y))[x](),m=r[l],$="enter"===h||13===y,E=(r[O],n.$()),T=E.before,_=E.value,D=E.after,I=T.slice(-1),R=D.slice(0,1),S=T[k](z("(?:^|\\n)("+c(s)+"+).*$")),W=S?S[1]:"",A=o[h];if(q[b]&&q[b][a](n,r))n[b](s),G(),j(r);else if(q[w]&&q[w][a](n,r))n[w](s),G(),j(r);else if(m)"z"===h||90===y?(n[L](),G(),j(r)):"y"!==h&&89!==y||(n[g](),G(),j(r));else if("\\"!==I&&h===R)n[K](E.end+1),G(),j(r);else if("\\"!==I&&A)G(),n.wrap(h,A),G(),j(r);else if("backspace"===h||8===y){var B="",F="";for(var H in o)B+=H,F+=o[H];B="(["+c(B)+"])",F="(["+c(F)+"])";var J=T[k](z(B+"\\n(?:"+c(W)+")$")),M=D[k](z("^\\n(?:"+c(W)+")"+F));!_&&J&&M&&M[1]===o[J[1]]?(n.trim("",""),G(),j(r)):!_&&T[k](z(c(s)+"$"))?(n[w](s),G(),j(r)):(A=o[I])&&A===R&&(n.peel(I,R),j(r)),G()}else"delete"===h||46===y?((A=o[I])&&A===R&&(n.peel(I,R),j(r)),G()):$?((A=o[I])&&A===R?(n.wrap("\n"+s+W,"\n"+W)[i]()[p](),j(r)):(_||W)&&(n.insert("\n",-1,!0)[b](W)[i]()[p](),j(r)),G()):u(G,0)}}function G(){o&&n[$]()}S&&(_(e,"keydown",F),q[K]&&(_(e,"mousedown",A),_(e,"mouseup",B),_(e,"touchend",B),_(e,"touchstart",A)),G()),n.pop=function(){return r&&r[a](n),T(e,"keydown",F),T(e,"mousedown",A),T(e,"mouseup",B),T(e,"touchend",B),T(e,"touchstart",A),o&&n.loss(!0),n},n.state=t},s)r[o]=s[o];r.prototype=r._=s._,e.TE=r}(this,this.document);
