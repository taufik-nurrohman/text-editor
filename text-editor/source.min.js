/*!
 * ==============================================================
 *  TEXT EDITOR SOURCE 1.1.9
 * ==============================================================
 * Author: Taufik Nurrohman <https://github.com/taufik-nurrohman>
 * License: MIT
 * --------------------------------------------------------------
 */
((e,t,r)=>{let n,o,l=e.TE,s=e.setTimeout,i=l.esc,c="blur",u="call",f="close",a="ctrlKey",p="disabled",d="focus",y="fromCharCode",k="match",w="pull",v="push",b="readOnly",m="record",C="redo",h="select",E="shiftKey",K="toLowerCase",$="undo";function g(e){e&&e.preventDefault()}function L(e,t){return new RegExp(e,t)}for(o in n=function(e,t){let r=this,n=r.pop,o=$ in l.prototype;l[u](r,e,t);let T=r.state,O={},j=!("source"in T)||T.source;var x,z;O[f]={"`":"`","(":")","{":"}","[":"]",'"':'"',"'":"'","<":">"},O[w]=(e=>{let t=e.ctrlKey,r=e.key,n=e.keyCode;return t&&(r&&"["===r||n&&219===n)}),O[v]=(e=>{let t=e.ctrlKey,r=e.key,n=e.keyCode;return t&&(r&&"]"===r||n&&221===n)}),j&&(T.source=(x=O,z=!0===T.source?{}:T.source,Object.assign(x,z)));let D=T.source||{};function R(t){if(e[p]||e[b])return;let n=D[f],o=T.tab,l=t.keyCode,m=(t.key||String[y](l))[K](),O=t[a],j="enter"===m||13===l,x=(t[E],r.$()),z=x.before,R=x.value,q=x.after,A=z.slice(-1),B=q.slice(0,1),F=z[k](L("(?:^|\\n)("+i(o)+"+).*$")),G=F?F[1]:"",H=n[m];if(D[v]&&D[v][u](r,t))r[v](o),S(),g(t);else if(D[w]&&D[w][u](r,t))r[w](o),S(),g(t);else if(O)"z"===m||90===l?(r[$](),S(),g(t)):"y"!==m&&89!==l||(r[C](),S(),g(t));else if("\\"!==A&&m===B)r[h](x.end+1),S(),g(t);else if("\\"!==A&&H)S(),r.wrap(m,H),S(),g(t);else if("backspace"===m||8===l){let e="",l="";for(let t in n)e+=t,l+=n[t];e="(["+i(e)+"])",l="(["+i(l)+"])";let s=z[k](L(e+"\\n(?:"+i(G)+")$")),c=q[k](L("^\\n(?:"+i(G)+")"+l));!R&&s&&c&&c[1]===n[s[1]]?(r.trim("",""),S(),g(t)):!R&&z[k](L(i(o)+"$"))?(r[w](o),S(),g(t)):(H=n[A])&&H===B&&(r.peel(A,B),g(t)),S()}else"delete"===m||46===l?((H=n[A])&&H===B&&(r.peel(A,B),g(t)),S()):j?((H=n[A])&&H===B?(r.wrap("\n"+o+G,"\n"+G)[c]()[d](),g(t)):(R||G)&&(r.insert("\n",-1,!0)[v](G)[c]()[d](),g(t)),S()):s(S,0)}function S(){o&&r[m]()}var q,A;j&&(q="keydown",A=R,e.addEventListener(q,A,!1),S()),r.pop=(()=>(n&&n[u](r),function(e,t,r){e.removeEventListener(t,r)}(e,"keydown",R),o&&r.loss(!0),r)),r.state=T},l)n[o]=l[o];n.prototype=l.prototype,e.TE=n})(window,document);
