/*!
 * ==============================================================
 *  TEXT EDITOR SOURCE 1.1.8
 * ==============================================================
 * Author: Taufik Nurrohman <https://github.com/taufik-nurrohman>
 * License: MIT
 * --------------------------------------------------------------
 */
!function(e,t,n){var o,r,u=e.TE,s=e.setTimeout,c=u.esc,i="blur",a="call",f="close",l="ctrlKey",d="disabled",p="focus",v="fromCharCode",y="indexOf",h="lastIndexOf",m="length",w="match",k="pull",b="push",C="readOnly",$="record",g="redo",E="replace",K="select",O="shiftKey",x="toLowerCase",L="undo";function T(e,t,n){e.removeEventListener(t,n)}function j(e,t,n){e.addEventListener(t,n,!1)}function z(e){e&&e.preventDefault()}function D(e,t){return new RegExp(e,t)}for(r in o=function(e,t){var n=this,o=n.pop,r=L in u.prototype;u[a](n,e,t);var I,R,S={},W=!("source"in(t=n.state))||t.source;S[f]={"`":"`","(":")","{":"}","[":"]",'"':'"',"'":"'","<":">"},S[k]=function(e){var t=e.ctrlKey,n=e.key,o=e.keyCode;return t&&(n&&"["===n||o&&219===o)},S[b]=function(e){var t=e.ctrlKey,n=e.key,o=e.keyCode;return t&&(n&&"]"===n||o&&221===o)},S[K]=!0,W&&(t.source=(I=S,R=!0===t.source?{}:t.source,Object.assign(I,R)));var q,A=t.source||{};function B(){e[d]||e[C]||s(function(){var e=n.$(),t=/\W/g,o=e.before[E](t,"|")[h]("|"),r=e.after[E](t,"|")[y]("|");e.value;o=o<0?0:o+1,r=r<0?e.after[m]:r,q!==e.start&&n[K](o,e.end+r)},0)}function F(){q=n.$().start}function G(o){if(!e[d]&&!e[C]){var r=A[f],u=t.tab,y=o.keyCode,h=(o.key||String[v](y))[x](),m=o[l],$="enter"===h||13===y,E=(o[O],n.$()),T=E.before,j=E.value,I=E.after,R=T.slice(-1),S=I.slice(0,1),W=T[w](D("(?:^|\\n)("+c(u)+"+).*$")),q=W?W[1]:"",B=r[h];if(A[b]&&A[b][a](n,o))n[b](u),H(),z(o);else if(A[k]&&A[k][a](n,o))n[k](u),H(),z(o);else if(m)"z"===h||90===y?(n[L](),H(),z(o)):"y"!==h&&89!==y||(n[g](),H(),z(o));else if("\\"!==R&&h===S)n[K](E.end+1),H(),z(o);else if("\\"!==R&&B)H(),n.wrap(h,B),H(),z(o);else if("backspace"===h||8===y){var F="",G="";for(var J in r)F+=J,G+=r[J];F="(["+c(F)+"])",G="(["+c(G)+"])";var M=T[w](D(F+"\\n(?:"+c(q)+")$")),N=I[w](D("^\\n(?:"+c(q)+")"+G));!j&&M&&N&&N[1]===r[M[1]]?(n.trim("",""),H(),z(o)):!j&&T[w](D(c(u)+"$"))?(n[k](u),H(),z(o)):(B=r[R])&&B===S&&(n.peel(R,S),z(o)),H()}else"delete"===h||46===y?((B=r[R])&&B===S&&(n.peel(R,S),z(o)),H()):$?((B=r[R])&&B===S?(n.wrap("\n"+u+q,"\n"+q)[i]()[p](),z(o)):(j||q)&&(n.insert("\n",-1,!0)[b](q)[i]()[p](),z(o)),H()):s(H,0)}}function H(){r&&n[$]()}W&&(j(e,"keydown",G),A[K]&&(j(e,"mousedown",B),j(e,"mouseup",F),j(e,"touchend",F),j(e,"touchstart",B)),H()),n.pop=function(){return o&&o[a](n),T(e,"keydown",G),T(e,"mousedown",B),T(e,"mouseup",F),T(e,"touchend",F),T(e,"touchstart",B),r&&n.loss(!0),n},n.state=t},u)o[r]=u[r];o.prototype=u.prototype,e.TE=o}(window,document);
