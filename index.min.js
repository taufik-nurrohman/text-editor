/*!
 *
 * The MIT License (MIT)
 *
 * Copyright © 2024 Taufik Nurrohman <https://github.com/taufik-nurrohman>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).TextEditor=t()}(this,(function(){"use strict";var e=function(e,t){return-1!==t.indexOf(e)},t=function(e){return Array.isArray(e)},r=function(e){return"function"==typeof e},n=function(e,t){return e&&l(t)&&e instanceof t},c=function(e,t){return void 0===t&&(t=!0),"object"==typeof e&&(!t||n(e,Object))},l=function(e){return function(e){return void 0!==e}(e)&&!function(e){return null===e}(e)},u=function(e){return"string"==typeof e},o=function(e){return e.length},i=function r(){for(var n=arguments.length,u=Array(n),i=0;i<n;i++)u[i]=arguments[i];for(var a=u.shift(),f=0,s=o(u);f<s;++f)for(var p in u[f])if(l(a[p]))if(t(a[p])&&t(u[f][p])){a[p]=[].concat(a[p]);for(var v=0,d=o(u[f][p]);v<d;++v)e(u[f][p][v],a[p])||a[p].push(u[f][p][v])}else c(a[p])&&c(u[f][p])?a[p]=r({},a[p],u[f][p]):a[p]=u[f][p];else a[p]=u[f][p];return a},a=document,f=window,s=a.body,p=a.documentElement,v=function(e,t){return void 0===t&&(t=""),e.replace(d("["+t+h.replace(/./g,"\\$&")+"]"),"\\$&")},d=function(e,t){return function(e){return n(e,RegExp)}(e)?e:RegExp(e,l(t)?t:"g")},h="!$^*()+=[]{}|:<>,.?/-";function g(e,t){return(e||"")["trim"+(-1===t?"Left":1===t?"Right":"")]()}function b(e,a){void 0===a&&(a={});var h=this;if(!e)return h;if(!n(h,b))return new b(e,a);var $=/^([\s\S]*?)$/,m=function(){return e.disabled},y=function(){return e.readOnly},w=function(){return e.value.replace(/\r/g,"")};return h.attach=function(){if(h.$=function(){return new b.S(e.selectionStart,e.selectionEnd,w())},h.blur=function(){return e.blur(),h},h.detach=function(){if(t(a.with))for(var n=0,l=o(a.with);n<l;++n){var i=a.with[n];u(i)&&(i=b[i]),c(i)&&r(i.detach)&&i.detach.call(h,e,a)}for(var f in h)"attach"!==f&&delete h[f];return h},h.focus=function(t){var r,n;return-1===t?r=n=0:1===t&&(r=o(w()),n=e.scrollHeight),l(r)&&l(n)&&(e.selectionStart=e.selectionEnd=r,e.scrollTop=n),e.focus(),h},h.get=function(){return!m()&&w()||null},h.insert=function(e,t,r){var n=$;return r&&h.replace(n,""),-1===t?n=/$/:1===t&&(n=/^/),h.replace(n,e,t)},h.let=function(){return e.value=h.value,h},h.match=function(e,n){var c=h.$(),l=c.after,u=c.before,o=c.value;if(t(e)){var i=[u.match(e[0]),o.match(e[1]),l.match(e[2])];return r(n)?n.call(h,i[0]||[],i[1]||[],i[2]||[]):[!!i[0],!!i[1],!!i[2]]}var a=o.match(e);return r(n)?n.call(h,a||[]):!!a},h.peel=function(e,t,r){var n=h.$(),c=n.after,l=n.before,u=n.value;e=v(e),t=v(t);var i=d(e+"$",""),a=d("^"+t,"");return r?h.replace(d("^"+e+"([\\s\\S]*?)"+t+"$",""),"$1"):i.test(l)&&a.test(c)?(l=l.replace(i,""),c=c.replace(a,""),h.set(l+u+c).select(l=o(l),l+o(u))):h.select()},h.pull=function(e,t){void 0===t&&(t=!0);var r=h.$(),n=r.before,c=r.end,u=r.length,i=r.start,f=r.value;return e=l(e)?e:a.tab,""!==n&&"\n"!==n.slice(-1)&&e!==n.slice(-o(e))&&h.select(i-=o(n.split("\n").pop()),u?c:i),e=v(e),u?t?h.replace(d("^"+e,"gm"),""):h.insert(f.split("\n").map((function(t){return d("^("+e+")*$","").test(t)?t:t.replace(d("^"+e,""),"")})).join("\n")):h.replace(d(e+"$",""),"",-1)},h.push=function(e,t){void 0===t&&(t=!1);var r=h.$(),n=r.before,c=r.end,u=r.length,i=r.start;return e=l(e)?e:a.tab,""!==n&&"\n"!==n.slice(-1)&&e!==n.slice(-o(e))&&h.select(i-=o(n.split("\n").pop()),u?c:i),u?h.replace(d("^"+(t?"":"(?!$)"),"gm"),e):h.insert(e,-1)},h.replace=function(e,t,r){var n=h.$(),c=n.after,l=n.before,u=n.value;return-1===r?l=l.replace(e,t):1===r?c=c.replace(e,t):u=u.replace(e,t),h.set(l+u+c).select(l=o(l),l+o(u))},h.select=function(){if(m()||y())return e.focus(),h;for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var c,l,u,i,a=o(r),v=h.$(),d=v.start,g=v.end;if(c=f.pageXOffset||p.scrollLeft||s.scrollLeft,l=f.pageYOffset||p.scrollTop||s.scrollTop,u=e.scrollLeft,i=e.scrollTop,0===a)r[0]=d,r[1]=g;else if(1===a){if(!0===r[0])return e.focus(),e.select(),h;r[1]=r[0]}return e.focus(),e.selectionStart=r[0],e.selectionEnd=r[1],e.scrollLeft=u,e.scrollTop=i,f.scroll(c,l),h},h.self=h.source=e,h.set=function(t){return m()||y()||(e.value=t),h},h.state=a=i({},b.state,u(a)?{tab:a}:a||{}),h.trim=function(e,t,r,n,c){void 0===c&&(c=!0),null!==e&&!1!==e&&(e=e||""),null!==t&&!1!==t&&(t=t||""),null!==r&&!1!==r&&(r=r||""),null!==n&&!1!==n&&(n=n||"");var l=h.$(),u=l.after,i=l.before,a=l.value,f=g(u,-1),s=g(i,1);return u=!1!==t?(f||!c?t:"")+g(u,-1):u,i=!1!==e?g(i,1)+(s||!c?e:""):i,!1!==n&&(a=g(a,1)),!1!==r&&(a=g(a,-1)),h.set(i+a+u).select(i=o(i),i+o(a))},h.value=w(),h.wrap=function(e,t,r){var n=h.$(),c=n.after,l=n.before,u=n.value;return r?h.replace($,e+"$1"+t):h.set(l+e+u+t+c).select(l=o(l+e),l+o(u))},t(a.with))for(var n=0,S=o(a.with);n<S;++n){var T=a.with[n];u(T)&&(T=b[T]),r(T)?T.call(h,e,a):c(T)&&r(T.attach)&&T.attach.call(h,e,a)}return h},h.attach()}return b.esc=v,b.state={tab:"\t",with:[]},b.S=function(e,t,r){var n=this,c=r.slice(e,t);n.after=r.slice(t),n.before=r.slice(0,e),n.end=t,n.length=o(c),n.start=e,n.value=c,n.toString=function(){return c}},b.version="4.0.2",b.x=h,b}));