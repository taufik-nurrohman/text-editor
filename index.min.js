/*!
 *
 * The MIT License (MIT)
 *
 * Copyright © 2024 Taufik Nurrohman <https://github.com/taufik-nurrohman>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).TextEditor=t()}(this,(function(){"use strict";var e=function(e,t){return-1!==t.indexOf(e)},t=function(e){return Array.isArray(e)},n=function(e){return"function"==typeof e},r=function(e,t){return e&&u(t)&&e instanceof t},c=function(e,t){return void 0===t&&(t=!0),"object"==typeof e&&(!t||r(e,Object))},u=function(e){return function(e){return void 0!==e}(e)&&!function(e){return null===e}(e)},l=function(e){return"string"==typeof e},i=function(e){return e.length},o=function(e){return i(a(e))},a=function(e){return Object.keys(e)},f=function n(){for(var r=arguments.length,l=Array(r),o=0;o<r;o++)l[o]=arguments[o];for(var a=l.shift(),f=0,s=i(l);f<s;++f)for(var v in l[f])if(u(a[v]))if(t(a[v])&&t(l[f][v])){a[v]=[].concat(a[v]);for(var p=0,d=i(l[f][v]);p<d;++p)e(l[f][v][p],a[v])||a[v].push(l[f][v][p])}else c(a[v])&&c(l[f][v])?a[v]=n({},a[v],l[f][v]):a[v]=l[f][v];else a[v]=l[f][v];return a},s=document,v=window,p=s.body,d=s.documentElement,h=function(e,t){return void 0===t&&(t=""),e.replace(g("["+t+b.replace(/./g,"\\$&")+"]"),"\\$&")},g=function(e,t){return function(e){return r(e,RegExp)}(e)?e:RegExp(e,u(t)?t:"g")},b="!$^*()+=[]{}|:<>,.?/-",$="TextEditor";function m(e,t){return(e||"")["trim"+(-1===t?"Left":1===t?"Right":"")]()}function y(e,a){void 0===a&&(a={});var s=this;if(!e)return s;if(e[$])return e[$];if(!r(s,y))return new y(e,a);s.state=a=f({},y.state,l(a)?{tab:a}:a||{}),s.self=s.source=e,y.instances[e.id||e.name||o(y.instances)]=s,e[$]=s;var b=/^([\s\S]*?)$/,w=function(){return e.disabled},T=function(){return e.readOnly},x=function(){return e.value.replace(/\r/g,"")};if(s.value=x(),s.get=function(){return!w()&&x()||null},s.let=function(){return e.value=s.value,s},s.set=function(t){return w()||T()||(e.value=t),s},s.$=function(){return new y.S(e.selectionStart,e.selectionEnd,x())},s.focus=function(t){var n,r;return-1===t?n=r=0:1===t&&(n=i(x()),r=e.scrollHeight),u(n)&&u(r)&&(e.selectionStart=e.selectionEnd=n,e.scrollTop=r),e.focus(),s},s.blur=function(){return e.blur(),s},s.select=function(){if(w()||T())return e.focus(),s;for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var c,u,l,o,a=i(n),f=s.$(),h=f.start,g=f.end;if(c=v.pageXOffset||d.scrollLeft||p.scrollLeft,u=v.pageYOffset||d.scrollTop||p.scrollTop,l=e.scrollLeft,o=e.scrollTop,0===a)n[0]=h,n[1]=g;else if(1===a){if(!0===n[0])return e.focus(),e.select(),s;n[1]=n[0]}return e.focus(),e.selectionStart=n[0],e.selectionEnd=n[1],e.scrollLeft=l,e.scrollTop=o,v.scroll(c,u),s},s.match=function(e,r){var c=s.$(),u=c.after,l=c.before,i=c.value;if(t(e)){var o=[l.match(e[0]),i.match(e[1]),u.match(e[2])];return n(r)?r.call(s,o[0]||[],o[1]||[],o[2]||[]):[!!o[0],!!o[1],!!o[2]]}var a=i.match(e);return n(r)?r.call(s,a||[]):!!a},s.replace=function(e,t,n){var r=s.$(),c=r.after,u=r.before,l=r.value;return-1===n?u=u.replace(e,t):1===n?c=c.replace(e,t):l=l.replace(e,t),s.set(u+l+c).select(u=i(u),u+i(l))},s.insert=function(e,t,n){var r=b;return n&&s.replace(r,""),-1===t?r=/$/:1===t&&(r=/^/),s.replace(r,e,t)},s.wrap=function(e,t,n){var r=s.$(),c=r.after,u=r.before,l=r.value;return n?s.replace(b,e+"$1"+t):s.set(u+e+l+t+c).select(u=i(u+e),u+i(l))},s.peel=function(e,t,n){var r=s.$(),c=r.after,u=r.before,l=r.value;e=h(e),t=h(t);var o=g(e+"$",""),a=g("^"+t,"");return n?s.replace(g("^"+e+"([\\s\\S]*?)"+t+"$",""),"$1"):o.test(u)&&a.test(c)?(u=u.replace(o,""),c=c.replace(a,""),s.set(u+l+c).select(u=i(u),u+i(l))):s.select()},s.pull=function(e,t){void 0===t&&(t=!0);var n=s.$(),r=n.before,c=n.end,l=n.length,o=n.start,f=n.value;return e=u(e)?e:a.tab,""!==r&&"\n"!==r.slice(-1)&&e!==r.slice(-i(e))&&s.select(o-=i(r.split("\n").pop()),l?c:o),e=h(e),l?t?s.replace(g("^"+e,"gm"),""):s.insert(f.split("\n").map((function(t){return g("^("+e+")*$","").test(t)?t:t.replace(g("^"+e,""),"")})).join("\n")):s.replace(g(e+"$",""),"",-1)},s.push=function(e,t){void 0===t&&(t=!1);var n=s.$(),r=n.before,c=n.end,l=n.length,o=n.start;return e=u(e)?e:a.tab,""!==r&&"\n"!==r.slice(-1)&&e!==r.slice(-i(e))&&s.select(o-=i(r.split("\n").pop()),l?c:o),l?s.replace(g("^"+(t?"":"(?!$)"),"gm"),e):s.insert(e,-1)},s.trim=function(e,t,n,r,c){void 0===c&&(c=!0),null!==e&&!1!==e&&(e=e||""),null!==t&&!1!==t&&(t=t||""),null!==n&&!1!==n&&(n=n||""),null!==r&&!1!==r&&(r=r||"");var u=s.$(),l=u.before,o=u.value,a=u.after,f=m(l,1),v=m(a,-1);return l=!1!==e?m(l,1)+(f||!c?e:""):l,a=!1!==t?(v||!c?t:"")+m(a,-1):a,!1!==n&&(o=m(o,-1)),!1!==r&&(o=m(o,1)),s.set(l+o+a).select(l=i(l),l+i(o))},t(a.with))for(var E=0,S=i(a.with);E<S;++E){var O=a.with[E];l(O)&&(O=y[O]),n(O)?O.call(s,e,a):c(O)&&n(O.attach)&&O.attach.call(s,e,a)}return s}return y.esc=h,y.instances={},y.get=function(e){return e[$]||null},y.let=function(e){var r=e[$];if(!r)return!1;var u=r.state;if(t(u.with))for(var a=0,f=i(u.with);a<f;++a){var s=u.with[a];l(s)&&(s=y[s]),c(s)&&n(s.detach)&&s.detach.call(r,e,u)}for(var v in delete y.instances[e.id||e.name||o(y.instances)-1],delete e[$],r)delete r[v];return!0},y.set=function(e,t){return void 0===t&&(t={}),e[$]||new y(e,t)},y.state={tab:"\t",with:[]},y.S=function(e,t,n){var r=this,c=n.slice(e,t);r.after=n.slice(t),r.before=n.slice(0,e),r.end=t,r.length=i(c),r.start=e,r.value=c,r.toString=function(){return c}},y.version="4.0.2",y.x=b,y}));