/*!
 *
 * The MIT License (MIT)
 *
 * Copyright © 2024 Taufik Nurrohman <https://github.com/taufik-nurrohman>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).TextEditor=t()}(this,(function(){"use strict";var e=function(e,t){return-1!==t.indexOf(e)},t=function(e){return Array.isArray(e)},r=function(e){return"function"==typeof e},n=function(e,t){return e&&u(t)&&e instanceof t},c=function(e,t){return void 0===t&&(t=!0),"object"==typeof e&&(!t||n(e,Object))},u=function(e){return function(e){return void 0!==e}(e)&&!function(e){return null===e}(e)},l=function(e){return"string"==typeof e},o=function(e){return e.length},i=function(e){return Object.keys(e)},a=function r(){for(var n=arguments.length,l=Array(n),i=0;i<n;i++)l[i]=arguments[i];for(var a=l.shift(),f=0,s=o(l);f<s;++f)for(var p in l[f])if(u(a[p]))if(t(a[p])&&t(l[f][p])){a[p]=[].concat(a[p]);for(var v=0,d=o(l[f][p]);v<d;++v)e(l[f][p][v],a[p])||a[p].push(l[f][p][v])}else c(a[p])&&c(l[f][p])?a[p]=r({},a[p],l[f][p]):a[p]=l[f][p];else a[p]=l[f][p];return a},f=document,s=window,p=f.body,v=f.documentElement,d=function(e,t){return void 0===t&&(t=""),e.replace(h("["+t+b.replace(/./g,"\\$&")+"]"),"\\$&")},h=function(e,t){return function(e){return n(e,RegExp)}(e)?e:RegExp(e,u(t)?t:"g")},b="!$^*()+=[]{}|:<>,.?/-",g="TextEditor";function $(e,t){return(e||"")["trim"+(-1===t?"Left":1===t?"Right":"")]()}function m(e,f){void 0===f&&(f={});var b=this;if(!e)return b;if(e[g])return e[g];if(!n(b,m))return new m(e,f);b.state=f=a({},m.state,l(f)?{tab:f}:f||{}),b.self=b.source=e,m.instances[e.id||e.name||function(e){return o(i(e))}(m.instances)]=b,e[g]=b;var y=/^([\s\S]*?)$/,w=function(){return e.disabled},T=function(){return e.readOnly},x=function(){return e.value.replace(/\r/g,"")};if(b.value=x(),b.get=function(){return!w()&&x()||null},b.let=function(){return e.value=b.value,b},b.set=function(t){return w()||T()||(e.value=t),b},b.$=function(){return new m.S(e.selectionStart,e.selectionEnd,x())},b.focus=function(t){var r,n;return-1===t?r=n=0:1===t&&(r=o(x()),n=e.scrollHeight),u(r)&&u(n)&&(e.selectionStart=e.selectionEnd=r,e.scrollTop=n),e.focus(),b},b.blur=function(){return e.blur(),b},b.select=function(){if(w()||T())return e.focus(),b;for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var c,u,l,i,a=o(r),f=b.$(),d=f.start,h=f.end;if(c=s.pageXOffset||v.scrollLeft||p.scrollLeft,u=s.pageYOffset||v.scrollTop||p.scrollTop,l=e.scrollLeft,i=e.scrollTop,0===a)r[0]=d,r[1]=h;else if(1===a){if(!0===r[0])return e.focus(),e.select(),b;r[1]=r[0]}return e.focus(),e.selectionStart=r[0],e.selectionEnd=r[1],e.scrollLeft=l,e.scrollTop=i,s.scroll(c,u),b},b.match=function(e,n){var c=b.$(),u=c.after,l=c.before,o=c.value;if(t(e)){var i=[l.match(e[0]),o.match(e[1]),u.match(e[2])];return r(n)?n.call(b,i[0]||[],i[1]||[],i[2]||[]):[!!i[0],!!i[1],!!i[2]]}var a=o.match(e);return r(n)?n.call(b,a||[]):!!a},b.replace=function(e,t,r){var n=b.$(),c=n.after,u=n.before,l=n.value;return-1===r?u=u.replace(e,t):1===r?c=c.replace(e,t):l=l.replace(e,t),b.set(u+l+c).select(u=o(u),u+o(l))},b.insert=function(e,t,r){var n=y;return r&&b.replace(n,""),-1===t?n=/$/:1===t&&(n=/^/),b.replace(n,e,t)},b.wrap=function(e,t,r){var n=b.$(),c=n.after,u=n.before,l=n.value;return r?b.replace(y,e+"$1"+t):b.set(u+e+l+t+c).select(u=o(u+e),u+o(l))},b.peel=function(e,t,r){var n=b.$(),c=n.after,u=n.before,l=n.value;e=d(e),t=d(t);var i=h(e+"$",""),a=h("^"+t,"");return r?b.replace(h("^"+e+"([\\s\\S]*?)"+t+"$",""),"$1"):i.test(u)&&a.test(c)?(u=u.replace(i,""),c=c.replace(a,""),b.set(u+l+c).select(u=o(u),u+o(l))):b.select()},b.pull=function(e,t){void 0===t&&(t=!0);var r=b.$(),n=r.before,c=r.end,l=r.length,i=r.start,a=r.value;return e=u(e)?e:f.tab,""!==n&&"\n"!==n.slice(-1)&&e!==n.slice(-o(e))&&b.select(i-=o(n.split("\n").pop()),l?c:i),e=d(e),l?t?b.replace(h("^"+e,"gm"),""):b.insert(a.split("\n").map((function(t){return h("^("+e+")*$","").test(t)?t:t.replace(h("^"+e,""),"")})).join("\n")):b.replace(h(e+"$",""),"",-1)},b.push=function(e,t){void 0===t&&(t=!1);var r=b.$(),n=r.before,c=r.end,l=r.length,i=r.start;return e=u(e)?e:f.tab,""!==n&&"\n"!==n.slice(-1)&&e!==n.slice(-o(e))&&b.select(i-=o(n.split("\n").pop()),l?c:i),l?b.replace(h("^"+(t?"":"(?!$)"),"gm"),e):b.insert(e,-1)},b.trim=function(e,t,r,n,c){void 0===c&&(c=!0),null!==e&&!1!==e&&(e=e||""),null!==t&&!1!==t&&(t=t||""),null!==r&&!1!==r&&(r=r||""),null!==n&&!1!==n&&(n=n||"");var u=b.$(),l=u.before,i=u.value,a=u.after,f=$(l,1),s=$(a,-1);return l=!1!==e?$(l,1)+(f||!c?e:""):l,a=!1!==t?(s||!c?t:"")+$(a,-1):a,!1!==r&&(i=$(i,-1)),!1!==n&&(i=$(i,1)),b.set(l+i+a).select(l=o(l),l+o(i))},b.pop=function(){if(!e[g])return b;if(t(f.with))for(var n=0,u=o(f.with);n<u;++n){var i=f.with[n];l(i)&&(i=m[i]),c(i)&&r(i.detach)&&i.detach.call(b,e,f)}return delete e[g],b},t(f.with))for(var E=0,S=o(f.with);E<S;++E){var O=f.with[E];l(O)&&(O=m[O]),r(O)?O.call(b,e,f):c(O)&&r(O.attach)&&O.attach.call(b,e,f)}return b}return m.esc=d,m.instances={},m.state={tab:"\t",with:[]},m.S=function(e,t,r){var n=this,c=r.slice(e,t);n.after=r.slice(t),n.before=r.slice(0,e),n.end=t,n.length=o(c),n.start=e,n.value=c,n.toString=function(){return c}},m.version="4.0.1",m.x=b,m}));