/*!
 *
 * The MIT License (MIT)
 *
 * Copyright © 2024 Taufik Nurrohman <https://github.com/taufik-nurrohman>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).TextEditor=t()}(this,(function(){"use strict";var e=function(e,t){return-1!==t.indexOf(e)},t=function(e){return Array.isArray(e)},r=function(e){return"function"==typeof e},n=function(e,t){return e&&u(t)&&e instanceof t},o=function(e,t){return void 0===t&&(t=!0),"object"==typeof e&&(!t||n(e,Object))},u=function(e){return function(e){return void 0!==e}(e)&&!function(e){return null===e}(e)},c=function(e){return"string"==typeof e},i=function(e){return e.length},l=function r(){for(var n=arguments.length,c=Array(n),l=0;l<n;l++)c[l]=arguments[l];for(var a=c.shift(),f=0,s=i(c);f<s;++f)for(var v in c[f])if(u(a[v]))if(t(a[v])&&t(c[f][v])){a[v]=[].concat(a[v]);for(var p=0,d=i(c[f][v]);p<d;++p)e(c[f][v][p],a[v])||a[v].push(c[f][v][p])}else o(a[v])&&o(c[f][v])?a[v]=r({},a[v],c[f][v]):a[v]=c[f][v];else a[v]=c[f][v];return a},a=document,f=window,s=a.body,v=a.documentElement,p=function(e,t){return void 0===t&&(t=""),e.replace(d("["+t+h.replace(/./g,"\\$&")+"]"),"\\$&")},d=function(e,t){return function(e){return n(e,RegExp)}(e)?e:RegExp(e,u(t)?t:"g")},h="!$^*()+=[]{}|:<>,.?/-";var m={blur:0,click:0,copy:0,cut:0,focus:0,input:0,keydown:"key.down",keyup:"key.up",mousedown:"mouse.down",mouseenter:"mouse.enter",mouseleave:"mouse.exit",mousemove:"mouse.move",mouseup:"mouse.up",paste:0,touchend:"mouse.up",touchmove:"mouse.move",touchstart:"mouse.down"};function g(e,t){return(e||"")["trim"+(-1===t?"Left":1===t?"Right":"")]()}function b(e,a){void 0===a&&(a={});var h=this;if(!e)return h;if(!n(h,b))return new b(e,a);var $,y=/^([\s\S]*?)$/,w=function(){return e.disabled},E=function(){return e.readOnly},x=function(){return e.value.replace(/\r/g,"")},S=x();return h.attach=function(){var n,T,k,L=function(e){var t={};return e.hooks=t,e.fire=function(r,n){return u(t[r])?(t[r].forEach((function(t){return t.apply(e,n)})),e):e},e.off=function(r,n){if(!u(r))return t={},e;if(u(t[r]))if(u(n)){var o=t[r].length;if(0===o)delete t[r];else for(var c=0;c<o;++c)if(n===t[r][c]){t[r].splice(c,1);break}}else delete t[r];return e},e.on=function(r,n){return u(t[r])||(t[r]=[]),u(n)&&t[r].push(n),e},e}(h),O=L.fire;for(var j in $||($=function(e){var t=e.type,r=x();r!==S&&(S=r,O("change",[e])),O(m[t]||t,[e])}),h.$=function(){return new b.S(e.selectionStart,e.selectionEnd,x())},h.blur=function(){return e.blur(),h},h.detach=function(){for(var n in S=x(),m)u=n,l=$,e.removeEventListener(u,l);var u,l;if(t(a.with))for(var f=0,s=i(a.with);f<s;++f){var v=a.with[f];c(v)&&(v=b[v]),o(v)&&r(v.detach)&&v.detach.call(h,e,a)}for(var p in h)"attach"!==p&&delete h[p];return h},h.focus=function(t){var r,n;return-1===t?r=n=0:1===t&&(r=i(x()),n=e.scrollHeight),u(r)&&u(n)&&(e.selectionStart=e.selectionEnd=r,e.scrollTop=n),e.focus(),h},h.get=function(){return!w()&&x()||null},h.insert=function(e,t,r){var n=y;return r&&h.replace(n,""),-1===t?n=/$/:1===t&&(n=/^/),h.replace(n,e,t)},h.let=function(){return e.value=h.value,h},h.match=function(e,n){var o=h.$(),u=o.after,c=o.before,i=o.value;if(t(e)){var l=[c.match(e[0]),i.match(e[1]),u.match(e[2])];return r(n)?n.call(h,l[0]||[],l[1]||[],l[2]||[]):[!!l[0],!!l[1],!!l[2]]}var a=i.match(e);return r(n)?n.call(h,a||[]):!!a},h.peel=function(e,t,r){var n=h.$(),o=n.after,u=n.before,c=n.value;e=p(e),t=p(t);var l=d(e+"$",""),a=d("^"+t,"");return r?h.replace(d("^"+e+"([\\s\\S]*?)"+t+"$",""),"$1"):l.test(u)&&a.test(o)?(u=u.replace(l,""),o=o.replace(a,""),h.set(u+c+o).select(u=i(u),u+i(c))):h.select()},h.pull=function(e,t){void 0===t&&(t=!0);var r=h.$(),n=r.before,o=r.end,c=r.length,l=r.start,f=r.value;return e=u(e)?e:a.tab,""!==n&&"\n"!==n.slice(-1)&&e!==n.slice(-i(e))&&h.select(l-=i(n.split("\n").pop()),c?o:l),e=p(e),c?t?h.replace(d("^"+e,"gm"),""):h.insert(f.split("\n").map((function(t){return d("^("+e+")*$","").test(t)?t:t.replace(d("^"+e,""),"")})).join("\n")):h.replace(d(e+"$",""),"",-1)},h.push=function(e,t){void 0===t&&(t=!1);var r=h.$(),n=r.before,o=r.end,c=r.length,l=r.start;return e=u(e)?e:a.tab,""!==n&&"\n"!==n.slice(-1)&&e!==n.slice(-i(e))&&h.select(l-=i(n.split("\n").pop()),c?o:l),c?h.replace(d("^"+(t?"":"(?!$)"),"gm"),e):h.insert(e,-1)},h.replace=function(e,t,r){var n=h.$(),o=n.after,u=n.before,c=n.value;return-1===r?u=u.replace(e,t):1===r?o=o.replace(e,t):c=c.replace(e,t),h.set(u+c+o).select(u=i(u),u+i(c))},h.select=function(){if(w()||E())return e.focus(),h;for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var o,u,c,l,a=i(r),p=h.$(),d=p.start,m=p.end;if(o=f.pageXOffset||v.scrollLeft||s.scrollLeft,u=f.pageYOffset||v.scrollTop||s.scrollTop,c=e.scrollLeft,l=e.scrollTop,0===a)r[0]=d,r[1]=m;else if(1===a){if(!0===r[0])return e.focus(),e.select(),h;r[1]=r[0]}return e.focus(),e.selectionStart=r[0],e.selectionEnd=r[1],e.scrollLeft=c,e.scrollTop=l,f.scroll(o,u),h},h.self=h.source=e,h.set=function(t){return w()||E()||(e.value=t),h},h.state=a=l({},b.state,c(a)?{tab:a}:a||{}),h.trim=function(e,t,r,n,o){void 0===o&&(o=!0),null!==e&&!1!==e&&(e=e||""),null!==t&&!1!==t&&(t=t||""),null!==r&&!1!==r&&(r=r||""),null!==n&&!1!==n&&(n=n||"");var u=h.$(),c=u.after,l=u.before,a=u.value,f=g(c,-1),s=g(l,1);return c=!1!==t?(f||!o?t:"")+g(c,-1):c,l=!1!==e?g(l,1)+(s||!o?e:""):l,!1!==n&&(a=g(a,1)),!1!==r&&(a=g(a,-1)),h.set(l+a+c).select(l=i(l),l+i(a))},h.value=x(),h.wrap=function(e,t,r){var n=h.$(),o=n.after,u=n.before,c=n.value;return r?h.replace(y,e+"$1"+t):h.set(u+e+c+t+o).select(u=i(u+e),u+i(c))},m)n=j,T=$,void 0===(k=void 0)&&(k=!1),e.addEventListener(n,T,k);if(t(a.with))for(var A=0,R=i(a.with);A<R;++A){var H=a.with[A];c(H)&&(H=b[H]),r(H)?H.call(h,e,a):o(H)&&r(H.attach)&&H.attach.call(h,e,a)}return h},h.attach()}return b.esc=p,b.state={tab:"\t",with:[]},b.S=function(e,t,r){var n=this,o=r.slice(e,t);n.after=r.slice(t),n.before=r.slice(0,e),n.end=t,n.length=i(o),n.start=e,n.value=o,n.toString=function(){return o}},b.version="4.0.2",b.x=h,b}));