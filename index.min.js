/*!
 *
 * The MIT License (MIT)
 *
 * Copyright © 2024 Taufik Nurrohman <https://github.com/taufik-nurrohman>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).TextEditor=t()}(this,(function(){"use strict";var e=function(e,t){return-1!==t.indexOf(e)},t=function(e){return Array.isArray(e)},r=function(e){return"function"==typeof e},n=function(e,t){return e&&c(t)&&e instanceof t},u=function(e,t){return void 0===t&&(t=!0),"object"==typeof e&&(!t||n(e,Object))},c=function(e){return function(e){return void 0!==e}(e)&&!function(e){return null===e}(e)},o=function(e){return"string"==typeof e},l=function(e){return e.length},i=function(e){return Object.keys(e)},a=function r(){for(var n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];for(var a=o.shift(),f=0,s=l(o);f<s;++f)for(var v in o[f])if(c(a[v]))if(t(a[v])&&t(o[f][v])){a[v]=[].concat(a[v]);for(var p=0,d=l(o[f][v]);p<d;++p)e(o[f][v][p],a[v])||a[v].push(o[f][v][p])}else u(a[v])&&u(o[f][v])?a[v]=r({},a[v],o[f][v]):a[v]=o[f][v];else a[v]=o[f][v];return a},f=document,s=window,v=f.body,p=f.documentElement,d=function(e,t){return void 0===t&&(t=""),e.replace(h("["+t+g.replace(/./g,"\\$&")+"]"),"\\$&")},h=function(e,t){return function(e){return n(e,RegExp)}(e)?e:(e=e.replace(/\//g,"\\/"),RegExp(e,c(t)?t:"g"))},g="!$^*()+=[]{}|:<>,.?/-",$="TextEditor";function b(e,t){return(e||"")["trim"+(-1===t?"Left":1===t?"Right":"")]()}function m(e,f){void 0===f&&(f={});var g=this;if(!e)return g;if(e[$])return e[$];if(!n(g,m))return new m(e,f);g.state=f=a({},m.state,o(f)?{tab:f}:f||{}),g.self=g.source=e,m.instances[e.id||e.name||function(e){return l(i(e))}(m.instances)]=g,e[$]=g;var y=/^([\s\S]*?)$/,w=function(){return e.disabled},T=function(){return e.readOnly},x=function(){return e.value.replace(/\r/g,"")};if(g.value=x(),g.get=function(){return!w()&&b(x())||null},g.let=function(){return e.value=g.value,g},g.set=function(t){return w()||T()||(e.value=t),g},g.$=function(){return new m.S(e.selectionStart,e.selectionEnd,x())},g.focus=function(t){var r,n;return-1===t?r=n=0:1===t&&(r=l(x()),n=e.scrollHeight),c(r)&&c(n)&&(e.selectionStart=e.selectionEnd=r,e.scrollTop=n),e.focus(),g},g.blur=function(){return e.blur(),g},g.select=function(){if(w()||T())return e.focus(),g;for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var u,c,o,i,a=l(r),f=g.$(),d=f.start,h=f.end;if(u=s.pageXOffset||p.scrollLeft||v.scrollLeft,c=s.pageYOffset||p.scrollTop||v.scrollTop,o=e.scrollLeft,i=e.scrollTop,0===a)r[0]=d,r[1]=h;else if(1===a){if(!0===r[0])return e.focus(),e.select(),g;r[1]=r[0]}return e.focus(),e.selectionStart=r[0],e.selectionEnd=r[1],e.scrollLeft=o,e.scrollTop=i,s.scroll(u,c),g},g.match=function(e,n){var u=g.$(),c=u.after,o=u.before,l=u.value;if(t(e)){var i=[o.match(e[0]),l.match(e[1]),c.match(e[2])];return r(n)?n.call(g,i[0]||[],i[1]||[],i[2]||[]):[!!i[0],!!i[1],!!i[2]]}var a=l.match(e);return r(n)?n.call(g,a||[]):!!a},g.replace=function(e,t,r){var n=g.$(),u=n.after,c=n.before,o=n.value;return-1===r?c=c.replace(e,t):1===r?u=u.replace(e,t):o=o.replace(e,t),g.set(c+o+u).select(c=l(c),c+l(o))},g.insert=function(e,t,r){var n=y;return r&&g.replace(n,""),-1===t?n=/$/:1===t&&(n=/^/),g.replace(n,e,t)},g.wrap=function(e,t,r){var n=g.$(),u=n.after,c=n.before,o=n.value;return r?g.replace(y,e+"$1"+t):g.set(c+e+o+t+u).select(c=l(c+e),c+l(o))},g.peel=function(e,t,r){var n=g.$(),u=n.after,c=n.before,o=n.value;e=d(e),t=d(t);var i=h(e+"$",""),a=h("^"+t,"");return r?g.replace(h("^"+e+"([\\s\\S]*?)"+t+"$",""),"$1"):i.test(c)&&a.test(u)?(c=c.replace(i,""),u=u.replace(a,""),g.set(c+o+u).select(c=l(c),c+l(o))):g.select()},g.pull=function(e,t){void 0===t&&(t=!0);var r=g.$(),n=r.length,u=r.value;return e=d(c(e)?e:f.tab),n?t?g.replace(h("^"+e,"gm"),""):g.insert(u.split("\n").map((function(t){return h("^("+e+")*$","").test(t)?t:t.replace(h("^"+e,""),"")})).join("\n")):g.replace(h(e+"$",""),"",-1)},g.push=function(e,t){void 0===t&&(t=!1);var r=g.$().length;return e=c(e)?e:f.tab,r?g.replace(h("^"+(t?"":"(?!$)"),"gm"),e):g.insert(e,-1)},g.trim=function(e,t,r,n,u){void 0===u&&(u=!0),null!==e&&!1!==e&&(e=e||""),null!==t&&!1!==t&&(t=t||""),null!==r&&!1!==r&&(r=r||""),null!==n&&!1!==n&&(n=n||"");var c=g.$(),o=c.before,i=c.value,a=c.after,f=b(o,1),s=b(a,-1);return o=!1!==e?b(o,1)+(f||!u?e:""):o,a=!1!==t?(s||!u?t:"")+b(a,-1):a,!1!==r&&(i=b(i,-1)),!1!==n&&(i=b(i,1)),g.set(o+i+a).select(o=l(o),o+l(i))},g.pop=function(){if(!e[$])return g;if(t(f.with))for(var n=0,c=l(f.with);n<c;++n){var i=f.with[n];o(i)&&(i=m[i]),u(i)&&r(i.detach)&&i.detach.call(g,e,f)}return delete e[$],g},t(f.with))for(var E=0,S=l(f.with);E<S;++E){var O=f.with[E];o(O)&&(O=m[O]),r(O)?O.call(g,e,f):u(O)&&r(O.attach)&&O.attach.call(g,e,f)}return g}return m.esc=d,m.instances={},m.state={tab:"\t",with:[]},m.S=function(e,t,r){var n=this,u=r.slice(e,t);n.after=r.slice(t),n.before=r.slice(0,e),n.end=t,n.length=l(u),n.start=e,n.value=u,n.toString=function(){return u}},m.version="4.0.1",m.x=g,m}));