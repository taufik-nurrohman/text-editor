/*!
 *
 * The MIT License (MIT)

 * Copyright © 2023 Taufik Nurrohman <https://github.com/taufik-nurrohman>

 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:

 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.

 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).TextEditor=t()}(this,(function(){"use strict";var e=function(e,t){return-1!==t.indexOf(e)},t=function(e){return Array.isArray(e)},r=function(e){return"function"==typeof e},n=function(e,t){return e&&c(t)&&e instanceof t},u=function(e,t){return void 0===t&&(t=!0),"object"==typeof e&&(!t||n(e,Object))},c=function(e){return function(e){return void 0!==e}(e)&&!function(e){return null===e}(e)},o=function(e){return e.length},l=function(e){return Object.keys(e)},i=function r(){for(var n=arguments.length,l=Array(n),i=0;i<n;i++)l[i]=arguments[i];for(var a=l.shift(),f=0,s=o(l);f<s;++f)for(var v in l[f])if(c(a[v]))if(t(a[v])&&t(l[f][v])){a[v]=[].concat(a[v]);for(var p=0,d=o(l[f][v]);p<d;++p)e(l[f][v][p],a[v])||a[v].push(l[f][v][p])}else u(a[v])&&u(l[f][v])?a[v]=r({},a[v],l[f][v]):a[v]=l[f][v];else a[v]=l[f][v];return a},a=document,f=window,s=a.body,v=a.documentElement,p=function(e,t){return void 0===t&&(t=""),e.replace(d("["+t+h.replace(/./g,"\\$&")+"]"),"\\$&")},d=function(e,t){return function(e){return n(e,RegExp)}(e)?e:(e=e.replace(/\//g,"\\/"),RegExp(e,c(t)?t:"g"))},h="!$^*()+=[]{}|:<>,.?/-",g="TextEditor";function $(e,t){return(e||"")["trim"+(-1===t?"Left":1===t?"Right":"")]()}function b(e,a){void 0===a&&(a={});var h=this;if(!e)return h;if(e[g])return e[g];if(!n(h,b))return new b(e,a);h.state=a=i({},b.state,function(e){return"string"==typeof e}(a)?{tab:a}:a||{}),h.self=h.source=e,b.instances[e.id||e.name||function(e){return o(l(e))}(b.instances)]=h,e[g]=h;var m=/^([\s\S]*?)$/,y=function(){return e.disabled},w=function(){return e.readOnly},T=function(){return e.value.replace(/\r/g,"")};if(h.value=T(),h.get=function(){return!y()&&$(T())||null},h.let=function(){return e.value=h.value,h},h.set=function(t){return y()||w()||(e.value=t),h},h.$=function(){return new b.S(e.selectionStart,e.selectionEnd,T())},h.focus=function(t){var r,n;return-1===t?r=n=0:1===t&&(r=o(T()),n=e.scrollHeight),c(r)&&c(n)&&(e.selectionStart=e.selectionEnd=r,e.scrollTop=n),e.focus(),h},h.blur=function(){return e.blur(),h},h.select=function(){if(y()||w())return e.focus(),h;for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];var u,c,l,i,a=o(r),p=h.$(),d=p.start,g=p.end;if(u=f.pageXOffset||v.scrollLeft||s.scrollLeft,c=f.pageYOffset||v.scrollTop||s.scrollTop,l=e.scrollLeft,i=e.scrollTop,0===a)r[0]=d,r[1]=g;else if(1===a){if(!0===r[0])return e.focus(),e.select(),h;r[1]=r[0]}return e.focus(),e.selectionStart=r[0],e.selectionEnd=r[1],e.scrollLeft=l,e.scrollTop=i,f.scroll(u,c),h},h.match=function(e,n){var u=h.$(),c=u.after,o=u.before,l=u.value;if(t(e)){var i=[o.match(e[0]),l.match(e[1]),c.match(e[2])];return r(n)?n.call(h,i[0]||[],i[1]||[],i[2]||[]):[!!i[0],!!i[1],!!i[2]]}var a=l.match(e);return r(n)?n.call(h,a||[]):!!a},h.replace=function(e,t,r){var n=h.$(),u=n.after,c=n.before,l=n.value;return-1===r?c=c.replace(e,t):1===r?u=u.replace(e,t):l=l.replace(e,t),h.set(c+l+u).select(c=o(c),c+o(l))},h.insert=function(e,t,r){var n=m;return r&&h.replace(n,""),-1===t?n=/$/:1===t&&(n=/^/),h.replace(n,e,t)},h.wrap=function(e,t,r){var n=h.$(),u=n.after,c=n.before,l=n.value;return r?h.replace(m,e+"$1"+t):h.set(c+e+l+t+u).select(c=o(c+e),c+o(l))},h.peel=function(e,t,r){var n=h.$(),u=n.after,c=n.before,l=n.value;e=p(e),t=p(t);var i=d(e+"$",""),a=d("^"+t,"");return r?h.replace(d("^"+e+"([\\s\\S]*?)"+t+"$",""),"$1"):i.test(c)&&a.test(u)?(c=c.replace(i,""),u=u.replace(a,""),h.set(c+l+u).select(c=o(c),c+o(l))):h.select()},h.pull=function(e,t){void 0===t&&(t=!0);var r=h.$(),n=r.length,u=r.value;return e=p(c(e)?e:a.tab),n?t?h.replace(d("^"+e,"gm"),""):h.insert(u.split("\n").map((function(t){return d("^("+e+")*$","").test(t)?t:t.replace(d("^"+e,""),"")})).join("\n")):h.replace(d(e+"$",""),"",-1)},h.push=function(e,t){void 0===t&&(t=!1);var r=h.$().length;return e=c(e)?e:a.tab,r?h.replace(d("^"+(t?"":"(?!$)"),"gm"),e):h.insert(e,-1)},h.trim=function(e,t,r,n,u){void 0===u&&(u=!0),null!==e&&!1!==e&&(e=e||""),null!==t&&!1!==t&&(t=t||""),null!==r&&!1!==r&&(r=r||""),null!==n&&!1!==n&&(n=n||"");var c=h.$(),l=c.before,i=c.value,a=c.after,f=$(l,1),s=$(a,-1);return l=!1!==e?$(l,1)+(f||!u?e:""):l,a=!1!==t?(s||!u?t:"")+$(a,-1):a,!1!==r&&(i=$(i,-1)),!1!==n&&(i=$(i,1)),h.set(l+i+a).select(l=o(l),l+o(i))},h.pop=function(){if(!e[g])return h;if(t(a.with))for(var n=0,c=o(a.with);n<c;++n){var l=a.with[n];u(l)&&r(l.detach)&&l.detach.call(h,e,a)}return delete e[g],h},t(a.with))for(var x=0,E=o(a.with);x<E;++x){var S=a.with[x];r(S)?S.call(h,e,a):u(S)&&r(S.attach)&&S.attach.call(h,e,a)}return h}return b.esc=p,b.instances={},b.state={tab:"\t",with:[]},b.S=function(e,t,r){var n=this,u=r.slice(e,t);n.after=r.slice(t),n.before=r.slice(0,e),n.end=t,n.length=o(u),n.start=e,n.value=u,n.toString=function(){return u}},b.version="4.0.1",b.x=h,b}));