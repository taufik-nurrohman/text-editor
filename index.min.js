/*!
 *
 * The MIT License (MIT)
 *
 * Copyright © 2021 Taufik Nurrohman
 *
 * <https://github.com/taufik-nurrohman/text-editor>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).TE=t()}(this,(function(){"use strict";var e=function(e){return"function"==typeof e},t=function(e,t){return e&&r(t)&&e instanceof t},r=function(e){return function(e){return void 0!==e}(e)&&!function(e){return null===e}(e)},n=function(e){return e.length},l=function(e){return Object.keys(e)},c=document,u=window,s=c.body,o=c.documentElement,a=function(e,t){return void 0===t&&(t=""),e.replace(p("["+t+d.replace(/./g,"\\$&")+"]"),"\\$&")},i=function(e){return f(e)?e.source.replace(/\\\//g,"/"):null},f=function(e){return t(e,RegExp)},p=function(e,t){return f(e)?e:(e=e.replace(/\//g,"\\/"),RegExp(e,r(t)?t:"g"))},d="!$^*()+=[]{}|:<>,.?/-";function g(e,t){return(e||"")["trim"+(-1===t?"Left":1===t?"Right":"")]()}function $(c,f={}){if(!c)return;const d=this;if(!t(d,$))return new $(c,f);if(c.TE)return;d.state=f=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return Object.assign.apply(Object,[{}].concat(t))}($.state,function(e){return"string"==typeof e}(f)?{tab:f}:f||{}),d.self=d.source=c,$.instances[c.id||c.name||function(e){return n(l(e))}($.instances)]=d,c.TE=1;let b=/^([\s\S]*?)$/,h=()=>c.disabled,m=()=>c.readOnly,v=()=>c.value.replace(/\r/g,"");return d.value=v(),d.get=()=>!h()&&g(v())||null,d.let=()=>c.value=d.value,d.set=e=>(h()||m()||(c.value=e),d),d.$=()=>new $.S(c.selectionStart,c.selectionEnd,v()),d.focus=e=>{let t,l;return-1===e?t=l=0:1===e&&(t=n(v()),l=c.scrollHeight),r(t)&&r(l)&&(c.selectionStart=c.selectionEnd=t,c.scrollTop=l),c.focus(),d},d.blur=()=>(c.blur(),d),d.select=(...e)=>{if(h()||m())return c.focus(),d;let t,r,l,a,i=n(e),{start:f,end:p}=d.$();if(t=u.pageXOffset||o.scrollLeft||s.scrollLeft,r=u.pageYOffset||o.scrollTop||s.scrollTop,l=c.scrollLeft,a=c.scrollTop,0===i)e[0]=f,e[1]=p;else if(1===i){if(!0===e[0])return c.focus(),c.select(),d;e[1]=e[0]}return c.focus(),c.selectionStart=e[0],c.selectionEnd=e[1],c.scrollLeft=l,c.scrollTop=a,u.scroll(t,r),d},d.match=(t,r)=>{let{after:n,before:l,value:c}=d.$();if(function(e){return Array.isArray(e)}(t)){let u=[l.match(t[0]),c.match(t[1]),n.match(t[2])];return e(r)?r.call(d,u[0]||[],u[1]||[],u[2]||[]):[!!u[0],!!u[1],!!u[2]]}let u=c.match(t);return e(r)?r.call(d,u||[]):!!u},d.replace=(e,t,r)=>{let{after:l,before:c,value:u}=d.$();return-1===r?c=c.replace(e,t):1===r?l=l.replace(e,t):u=u.replace(e,t),d.set(c+u+l).select(c=n(c),c+n(u))},d.insert=(e,t,r)=>{let n=b;return r&&d.replace(n,""),-1===t?n=/$/:1===t&&(n=/^/),d.replace(n,e,t)},d.wrap=(e,t,r)=>{let{after:l,before:c,value:u}=d.$();return r?d.replace(b,e+"$1"+t):d.set(c+e+u+t+l).select(c=n(c+e),c+n(u))},d.peel=(e,t,r)=>{let{after:l,before:c,value:u}=d.$();e=i(e)||a(e),t=i(t)||a(t),e=e.replace(/^\^|\$$/g,""),t=t.replace(/^\^|\$$/,"");let s=p(e+"$",""),o=p("^"+t,"");return r?d.replace(p("^"+e+"([\\s\\S]*?)"+t+"$",""),"$1"):s.test(c)&&o.test(l)?(c=c.replace(s,""),l=l.replace(o,""),d.set(c+u+l).select(c=n(c),c+n(u))):d.select()},d.pull=(e,t=!0)=>{let{length:n,value:l}=d.$();return e=r(e)?e:f.tab,e=(e=i(e)||a(e)).replace(/^\^/,""),n?t?d.replace(p("^"+e,"gm"),""):d.insert(l.split("\n").map((t=>p("^("+e+")*$","").test(t)?t:t.replace(p("^"+e,""),""))).join("\n")):d.replace(p(e+"$",""),"",-1)},d.push=(e,t=!1)=>{let{length:n}=d.$();return e=r(e)?e:f.tab,n?d.replace(p("^"+(t?"":"(?!$)"),"gm"),e):d.insert(e,-1)},d.trim=(e,t,r,l,c=!0)=>{null!==e&&!1!==e&&(e=e||""),null!==t&&!1!==t&&(t=t||""),null!==r&&!1!==r&&(r=r||""),null!==l&&!1!==l&&(l=l||"");let{before:u,value:s,after:o}=d.$(),a=g(u,1),i=g(o,-1);return u=!1!==e?g(u,1)+(a||!c?e:""):u,o=!1!==t?(i||!c?t:"")+g(o,-1):o,!1!==r&&(s=g(s,-1)),!1!==l&&(s=g(s,1)),d.set(u+s+o).select(u=n(u),u+n(s))},d.pop=()=>c.TE?(delete c.TE,d):d,d.state=f,d}return $.esc=a,$.instances={},$.state={tab:"\t"},$.S=function(e,t,r){let l=this,c=r.slice(e,t);l.start=e,l.end=t,l.value=c,l.before=r.slice(0,e),l.after=r.slice(t),l.length=n(c),l.toString=()=>c},$.version="3.3.0",$.x=d,$}));