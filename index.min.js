/*!
 *
 * The MIT License (MIT)
 *
 * Copyright © 2020 Taufik Nurrohman
 *
 * <https://github.com/taufik-nurrohman/text-editor>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).TE=t()}(this,(function(){"use strict";var e=function(e){return"function"==typeof e},t=function(e,t){return e&&n(t)&&e instanceof t},n=function(e){return function(e){return void 0!==e}(e)&&!function(e){return null===e}(e)},r=document,u=window,c=r.body,l=r.documentElement,o=function(e,t){return void 0===t&&(t=""),e.replace(f("["+t+s.replace(/./g,"\\$&")+"]"),"\\$&")},a=function(e){return i(e)?e.source.replace(/\\\//g,"/"):null},i=function(e){return t(e,RegExp)},f=function(e,t){return i(e)?e:(e=e.replace(/\//g,"\\/"),RegExp(e,n(t)?t:"g"))},s="!$^*()+=[]{}|:<>,.?/-",p=function(e){return e.length},v=function(e){return Object.keys(e)};function d(e,t){return(e||"")["trim"+(-1===t?"Left":1===t?"Right":"")]()}function g(r,i){if(void 0===i&&(i={}),r){var s=this;if(r.TE)return s;if(!t(s,g))return new g(r,i);s.state=i=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object.assign.apply(Object,[{}].concat(t))}(g.state,function(e){return"string"==typeof e}(i)?{tab:i}:i||{}),s.self=s.source=r,g.instances[r.id||r.name||function(e){return p(v(e))}(g.instances)]=s,r.TE=1;var $=/^([\s\S]*?)$/,b=function(){return r.disabled},h=function(){return r.readOnly},m=function(){return r.value.replace(/\r/g,"")};return s.value=m(),s.get=function(){return!b()&&d(m())||null},s.let=function(){return r.value=s.value},s.set=function(e){return b()||h()||(r.value=e),s},s.$=function(){return new g.S(r.selectionStart,r.selectionEnd,m())},s.focus=function(e){var t,u;return-1===e?t=u=0:1===e&&(t=p(m()),u=r.scrollHeight),n(t)&&n(u)&&(r.selectionStart=r.selectionEnd=t,r.scrollTop=u),r.focus(),s},s.blur=function(){return r.blur(),s},s.select=function(){if(b()||h())return r.focus(),s;for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var o,a,i,f,v=p(t),d=s.$(),g=d.start,$=d.end;if(o=u.pageXOffset||l.scrollLeft||c.scrollLeft,a=u.pageYOffset||l.scrollTop||c.scrollTop,i=r.scrollLeft,f=r.scrollTop,0===v)t[0]=g,t[1]=$;else if(1===v){if(!0===t[0])return r.focus(),r.select(),s;t[1]=t[0]}return r.focus(),r.selectionStart=t[0],r.selectionEnd=t[1],r.scrollLeft=i,r.scrollTop=f,u.scroll(o,a),s},s.match=function(t,n){var r=s.$(),u=r.after,c=r.before,l=r.value;if(function(e){return Array.isArray(e)}(t)){var o=[c.match(t[0]),l.match(t[1]),u.match(t[2])];return e(n)?n.call(s,o[0]||[],o[1]||[],o[2]||[]):[!!o[0],!!o[1],!!o[2]]}var a=l.match(t);return e(n)?n.call(s,a||[]):!!a},s.replace=function(e,t,n){var r=s.$(),u=r.after,c=r.before,l=r.value;return-1===n?c=c.replace(e,t):1===n?u=u.replace(e,t):l=l.replace(e,t),s.set(c+l+u).select(c=p(c),c+p(l))},s.insert=function(e,t,n){var r=$;return n&&s.replace(r,""),-1===t?r=/$/:1===t&&(r=/^/),s.replace(r,e,t)},s.wrap=function(e,t,n){var r=s.$(),u=r.after,c=r.before,l=r.value;return n?s.replace($,e+"$1"+t):s.set(c+e+l+t+u).select(c=p(c+e),c+p(l))},s.peel=function(e,t,n){var r=s.$(),u=r.after,c=r.before,l=r.value;e=a(e)||o(e),t=a(t)||o(t),e=e.replace(/^\^|\$$/g,""),t=t.replace(/^\^|\$$/,"");var i=f(e+"$",""),v=f("^"+t,"");return n?s.replace(f("^"+e+"([\\s\\S]*?)"+t+"$",""),"$1"):i.test(c)&&v.test(u)?(c=c.replace(i,""),u=u.replace(v,""),s.set(c+l+u).select(c=p(c),c+p(l))):s.select()},s.pull=function(e,t){void 0===t&&(t=!0);var r=s.$(),u=r.length,c=r.value;return e=n(e)?e:i.tab,e=(e=a(e)||o(e)).replace(/^\^/,""),u?t?s.replace(f("^"+e,"gm"),""):s.insert(c.split("\n").map((function(t){return f("^("+e+")*$","").test(t)?t:t.replace(f("^"+e,""),"")})).join("\n")):s.replace(f(e+"$",""),"",-1)},s.push=function(e,t){void 0===t&&(t=!1);var r=s.$().length;return e=n(e)?e:i.tab,r?s.replace(f("^"+(t?"":"(?!$)"),"gm"),e):s.insert(e,-1)},s.trim=function(e,t,n,r,u){void 0===u&&(u=!0),null!==e&&!1!==e&&(e=e||""),null!==t&&!1!==t&&(t=t||""),null!==n&&!1!==n&&(n=n||""),null!==r&&!1!==r&&(r=r||"");var c=s.$(),l=c.before,o=c.value,a=c.after,i=d(l,1),f=d(a,-1);return l=!1!==e?d(l,1)+(i||!u?e:""):l,a=!1!==t?(f||!u?t:"")+d(a,-1):a,!1!==n&&(o=d(o,-1)),!1!==r&&(o=d(o,1)),s.set(l+o+a).select(l=p(l),l+p(o))},s.pop=function(){return r.TE?(delete r.TE,s):s},s.state=i,s}}return g.esc=o,g.instances={},g.state={tab:"\t"},g.S=function(e,t,n){var r=this,u=n.slice(e,t);r.start=e,r.end=t,r.value=u,r.before=n.slice(0,e),r.after=n.slice(t),r.length=p(u),r.toString=function(){return u}},g.version="3.2.2",g.x=s,g}));