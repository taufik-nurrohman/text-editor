/*!
 *
 * The MIT License (MIT)
 *
 * Copyright © 2021 Taufik Nurrohman
 *
 * <https://github.com/taufik-nurrohman/text-editor>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the “Software”), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).TE=t()}(this,(function(){"use strict";var e=function(e){return"function"==typeof e},t=function(e,t){return e&&r(t)&&e instanceof t},r=function(e){return function(e){return void 0!==e}(e)&&!function(e){return null===e}(e)},n=function(e){return e.length},l=function(e){return Object.keys(e)},c=document,u=window,s=c.body,o=c.documentElement,a=function(e,t){return void 0===t&&(t=""),e.replace(i("["+t+f.replace(/./g,"\\$&")+"]"),"\\$&")},i=function(e,n){return function(e){return t(e,RegExp)}(e)?e:(e=e.replace(/\//g,"\\/"),RegExp(e,r(n)?n:"g"))},f="!$^*()+=[]{}|:<>,.?/-";function p(e,t){return(e||"")["trim"+(-1===t?"Left":1===t?"Right":"")]()}function d(c,f={}){if(!c)return;const g=this;if(!t(g,d))return new d(c,f);if(c.TE)return;g.state=f=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return Object.assign.apply(Object,[{}].concat(t))}(d.state,function(e){return"string"==typeof e}(f)?{tab:f}:f||{}),g.self=g.source=c,d.instances[c.id||c.name||function(e){return n(l(e))}(d.instances)]=g,c.TE=1;let $=/^([\s\S]*?)$/,b=()=>c.disabled,h=()=>c.readOnly,m=()=>c.value.replace(/\r/g,"");return g.value=m(),g.get=()=>!b()&&p(m())||null,g.let=()=>c.value=g.value,g.set=e=>(b()||h()||(c.value=e),g),g.$=()=>new d.S(c.selectionStart,c.selectionEnd,m()),g.focus=e=>{let t,l;return-1===e?t=l=0:1===e&&(t=n(m()),l=c.scrollHeight),r(t)&&r(l)&&(c.selectionStart=c.selectionEnd=t,c.scrollTop=l),c.focus(),g},g.blur=()=>(c.blur(),g),g.select=(...e)=>{if(b()||h())return c.focus(),g;let t,r,l,a,i=n(e),{start:f,end:p}=g.$();if(t=u.pageXOffset||o.scrollLeft||s.scrollLeft,r=u.pageYOffset||o.scrollTop||s.scrollTop,l=c.scrollLeft,a=c.scrollTop,0===i)e[0]=f,e[1]=p;else if(1===i){if(!0===e[0])return c.focus(),c.select(),g;e[1]=e[0]}return c.focus(),c.selectionStart=e[0],c.selectionEnd=e[1],c.scrollLeft=l,c.scrollTop=a,u.scroll(t,r),g},g.match=(t,r)=>{let{after:n,before:l,value:c}=g.$();if(function(e){return Array.isArray(e)}(t)){let u=[l.match(t[0]),c.match(t[1]),n.match(t[2])];return e(r)?r.call(g,u[0]||[],u[1]||[],u[2]||[]):[!!u[0],!!u[1],!!u[2]]}let u=c.match(t);return e(r)?r.call(g,u||[]):!!u},g.replace=(e,t,r)=>{let{after:l,before:c,value:u}=g.$();return-1===r?c=c.replace(e,t):1===r?l=l.replace(e,t):u=u.replace(e,t),g.set(c+u+l).select(c=n(c),c+n(u))},g.insert=(e,t,r)=>{let n=$;return r&&g.replace(n,""),-1===t?n=/$/:1===t&&(n=/^/),g.replace(n,e,t)},g.wrap=(e,t,r)=>{let{after:l,before:c,value:u}=g.$();return r?g.replace($,e+"$1"+t):g.set(c+e+u+t+l).select(c=n(c+e),c+n(u))},g.peel=(e,t,r)=>{let{after:l,before:c,value:u}=g.$();e=a(e),t=a(t);let s=i(e+"$",""),o=i("^"+t,"");return r?g.replace(i("^"+e+"([\\s\\S]*?)"+t+"$",""),"$1"):s.test(c)&&o.test(l)?(c=c.replace(s,""),l=l.replace(o,""),g.set(c+u+l).select(c=n(c),c+n(u))):g.select()},g.pull=(e,t=!0)=>{let{length:n,value:l}=g.$();return e=a(r(e)?e:f.tab),n?t?g.replace(i("^"+e,"gm"),""):g.insert(l.split("\n").map((t=>i("^("+e+")*$","").test(t)?t:t.replace(i("^"+e,""),""))).join("\n")):g.replace(i(e+"$",""),"",-1)},g.push=(e,t=!1)=>{let{length:n}=g.$();return e=r(e)?e:f.tab,n?g.replace(i("^"+(t?"":"(?!$)"),"gm"),e):g.insert(e,-1)},g.trim=(e,t,r,l,c=!0)=>{null!==e&&!1!==e&&(e=e||""),null!==t&&!1!==t&&(t=t||""),null!==r&&!1!==r&&(r=r||""),null!==l&&!1!==l&&(l=l||"");let{before:u,value:s,after:o}=g.$(),a=p(u,1),i=p(o,-1);return u=!1!==e?p(u,1)+(a||!c?e:""):u,o=!1!==t?(i||!c?t:"")+p(o,-1):o,!1!==r&&(s=p(s,-1)),!1!==l&&(s=p(s,1)),g.set(u+s+o).select(u=n(u),u+n(s))},g.pop=()=>c.TE?(delete c.TE,g):g,g.state=f,g}return d.esc=a,d.instances={},d.state={tab:"\t"},d.S=function(e,t,r){let l=this,c=r.slice(e,t);l.after=r.slice(t),l.before=r.slice(0,e),l.end=t,l.length=n(c),l.start=e,l.value=c,l.toString=()=>c},d.version="3.3.2",d.x=f,d}));